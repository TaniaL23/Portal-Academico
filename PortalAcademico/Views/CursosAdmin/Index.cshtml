@model IEnumerable<PortalAcademico.Models.Curso>
@{
    ViewData["Title"] = "Cursos (Coordinador)";
}

<h2 class="mb-4 h-title">@ViewData["Title"]</h2>

@if (TempData["ok"] is string okMsg)
{
    <div class="alert alert-success">@okMsg</div>
}
@if (TempData["error"] is string errMsg)
{
    <div class="alert alert-danger">@errMsg</div>
}

<div class="card panel mb-3 p-3">
    <div class="d-flex justify-content-between align-items-center">
        <div class="text-secondary">Administra la oferta académica (crear, editar o desactivar).</div>
        <a asp-action="Crear" class="btn btn-soft-primary">
            <i class="bi bi-plus-circle me-1"></i> Crear curso
        </a>
    </div>
</div>

@if (!Model.Any())
{
    <div class="alert alert-info">No hay cursos registrados aún.</div>
}
else
{
    <div class="card panel p-0">
      <div class="table-responsive">
        <table class="table table-darkish table-striped table-hover align-middle mb-0">
          <thead>
            <tr>
              <th scope="col">Nombre</th>
              <th scope="col">Código</th>
              <th scope="col" class="text-center">Créditos</th>
              <th scope="col">Horario</th>
              <th scope="col" class="text-center">Activo</th>
              <th scope="col" class="text-end" style="width:220px;">Acciones</th>
            </tr>
          </thead>
          <tbody>
          @foreach (var c in Model)
          {
              <tr>
                  <td>@c.Nombre</td>
                  <td class="text-secondary">@c.Codigo</td>
                  <td class="text-center">@c.Creditos</td>
                  <td>@($"{c.HorarioInicio:hh\\:mm} - {c.HorarioFin:hh\\:mm}")</td>
                  <td class="text-center">
                      @if (c.Activo)
                      { <span class="badge rounded-pill badge-on">Sí</span> }
                      else
                      { <span class="badge rounded-pill badge-off">No</span> }
                  </td>
                  <td class="text-end">
                      <a asp-action="Editar" asp-route-id="@c.Id" class="btn btn-ghost btn-sm me-2">
                          <i class="bi bi-pencil-square me-1"></i> Editar
                      </a>
                      @if (c.Activo)
                      {
                          <form asp-action="Desactivar" asp-route-id="@c.Id" method="post" class="d-inline"
                                onsubmit="return confirm('¿Seguro que deseas desactivar este curso?');">
                              <button class="btn btn-ghost-warn btn-sm">
                                  <i class="bi bi-slash-circle me-1"></i> Desactivar
                              </button>
                          </form>
                      }
                  </td>
              </tr>
          }
          </tbody>
        </table>
      </div>
    </div>
}
